@model CategoryViewModel

@if (Model != null)
{
    <tr data-category-id="@Model.Id" data-category-name="@Model.Name">
        <td class="text-center">
            <a asp-action="Details" asp-route-id="@Model.Id" class="text-gray-800 text-hover-primary fw-bold">
                @(Model.Name ?? "N/A")
            </a>
        </td>
        <td>
            @{
                var description = Model.Description ?? "";
                var displayDescription = description.Length > 50 ? $"{description.Substring(0, 50)}..." : description;
            }
            <span class="text-gray-600">@(string.IsNullOrEmpty(displayDescription) ? "No description" : displayDescription)</span>
        </td>
        <td class="js-status">
            <span class="badge badge-light-@(!Model.IsActive ? "danger" : "success")">
                @(!Model.IsActive ? "Inactive" : "Active")
            </span>
        </td>
        <td class="text-center">
            <div class="d-flex justify-content-center gap-1">
                <a asp-action="Details" asp-route-id="@Model.Id" class="btn btn-icon btn-light-primary btn-sm"
                   data-bs-toggle="tooltip" title="View Details">
                    <i class="ki-duotone ki-eye fs-4">
                        <span class="path1"></span>
                        <span class="path2"></span>
                        <span class="path3"></span>
                    </i>
                </a>
                @if (User.IsInRole("Admin"))
                {
                    <a asp-action="Edit" asp-route-id="@Model.Id" class="btn btn-icon btn-light-warning btn-sm"
                       data-bs-toggle="tooltip" title="Edit Category">
                        <i class="ki-duotone ki-pencil fs-4">
                            <span class="path1"></span>
                            <span class="path2"></span>
                        </i>
                    </a>
                    <button type="button" 
                            class="btn btn-icon btn-light-danger btn-sm js-delete-category-permanently" 
                            data-category-id="@Model.Id"
                            data-category-name="@Model.Name"
                            data-bs-toggle="tooltip" 
                            title="Delete Category">
                        <i class="ki-duotone ki-trash fs-4">
                            <span class="path1"></span>
                            <span class="path2"></span>
                            <span class="path3"></span>
                            <span class="path4"></span>
                            <span class="path5"></span>
                        </i>
                    </button>
                }
            </div>
        </td>
    </tr>
}
else
{
    <tr class="text-danger">
        <td colspan="4" class="text-center text-muted">
            <i class="ki-duotone ki-information-4 fs-2">
                <span class="path1"></span>
                <span class="path2"></span>
                <span class="path3"></span>
            </i>
            Invalid category data (Model is null)
        </td>
    </tr>
}