@using FreelanceJobBoard.Domain.Constants
@using FreelanceJobBoard.Presentation.Models.DTOs
@model PagedResultDto<JobViewModel>
@{
	ViewData["Title"] = "Browse Available Jobs";
	Layout = "_Layout";
}
<!-- Accordion Design Start -->
<section class="accordion">
	<div class="container">

		<!-- search filter -->
		<div class="row extra-mrg">
			<div class="wrap-search-filter">
				<form method="get" asp-action="AllJobs">
					<div class="row align-items-end">
						<div class="col-md-4">
							<label class="form-label">Search</label>
							<input type="text" name="search" value="@ViewBag.Search" class="form-control" placeholder="Search jobs...">
						</div>
						<div class="col-md-3">
							<label class="form-label">Sort By</label>
							<select name="sortBy" class="form-select">
								<option value="">Default</option>
								<option value="title" selected="@(ViewBag.SortBy == "title")">Title</option>
								<option value="deadline" selected="@(ViewBag.SortBy == "deadline")">Deadline</option>
								<option value="budget" selected="@(ViewBag.SortBy == "budget")">Budget</option>
							</select>
						</div>
						<div class="col-md-3">
							<label class="form-label">Categories</label>
							<select name="category" class="form-select">
								<option value="">Default</option>
								@foreach (var item in (IEnumerable<SelectListItem>)ViewBag.Categories)
								{
									<option value="@item.Value" >@item.Text</option>
								}
							</select>
						</div>
						<div class="col-md-3">
							<label class="form-label">Direction</label>
							<select name="sortDirection" class="form-select">
								<option value="@SortDirection.Ascending" selected="@(ViewBag.SortDirection == SortDirection.Ascending)">Ascending</option>
								<option value="@SortDirection.Descending" selected="@(ViewBag.SortDirection == SortDirection.Descending)">Descending</option>
							</select>
						</div>
						<div class="col-md-2">
							<button type="submit" class="btn btn-primary w-100">Search</button>
						</div>
					</div>
				</form>
				
			</div>
		</div>
		<!-- search filter End -->
		<!-- Freelancers Start -->
		<div class="row">
			@if(Model is null)
			{
				<p>no jobs</p>
			}
			else
			{
				@foreach (var job in Model?.Items)
				{
					<div class="col-md-4 col-sm-6">
						<div class="popular-jobs-container">
							<div class="popular-jobs-box">
								<div class="popular-jobs-status">
									@foreach (var category in job.Categories)
									{
										<span class="bg-primary job-status-item">@category.Name</span>
									}
								</div>

								<h4 class="flc-rate">$17/hr</h4>
								<div class="popular-jobs-box">
									<div class="popular-jobs-box-detail">
										<h4>Google</h4>
										<span class="desination">@job.Title</span>
										<div class="d-flex justify-content-between align-items-center mb-3">
											<span class="text-dark fw-bold fs-4">$@job.BudgetMin - $@job.BudgetMax</span>
											<span class="text-muted fs-7">Deadline: @job.Deadline.ToString("MMM dd, yyyy")</span>
										</div>
									</div>
								</div>
								<div class="popular-jobs-box-extra">
									<ul>
										@foreach (var skill in job.Skills)
										{
											<li>@skill.Name</li>
										}
									</ul>
									<p>@job.Description</p>
								</div>
							</div>
							<a href="#" class="btn btn-popular-jobs bt-1">View Detail</a>
						</div>
					</div>

				}

				<div class="col-md-12 col-sm-12">
					<div class="text-center">
						<a href="#" class="btn btn-primary">Load More</a>
					</div>
				</div>
			}
			

		</div>

	</div>
</section>
<!-- Accordion Design End -->