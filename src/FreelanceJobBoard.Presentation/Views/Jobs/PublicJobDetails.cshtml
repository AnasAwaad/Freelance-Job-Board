@model PublicJobDetailsViewModel
@{
	Layout = "_Layout";
}

<section>
	<div class="container">

        <div class="col-md-8 col-sm-8">
            <div class="container-detail-box">

                <div class="apply-job-header">
                    <h4>@Model.Title</h4>
                    <a href="company-detail.html" class="cl-success">
                        <span><i class="fa fa-building"></i>@Model.Client.Company.Name</span>
                    </a>
                    <span><i class="fa fa-map-marker"></i>@Model.Client.Company.Industry</span>
                </div>
                <div class="apply-job-detail">
                    <p>@Model.Description</p>
                </div>
                

                <div class="apply-job-detail">
                    <h5>Skills</h5>
                    <ul class="skills">
                        @foreach (var skill in Model.Skills)
                        {
                            <li>@skill.Name</li>
                        }
                    </ul>
                </div>

                <div class="apply-job-detail">
                    <h5>Project Card</h5>
                    <ul class="job-requirements">
                        <li><span>Project status</span> @Model.Status</li>
                        <li><span>Posted</span> @Model.TimeAgo</li>
                        <li><span>Last Updated on</span> @Model.LastUpdatedOn</li>
                        <li><span>Delivery time</span> @Model.Deadline.ToString("dd MMM yyyy")</li>
                    </ul>
                </div>

            </div>
            <!-- Similar Jobs -->
            <partial name="_SimilarJobs" model="Model.RelatedJobs" />
        </div>


		<!-- Sidebar Start-->
		<div class="col-md-4 col-sm-4">

			<!-- Job Detail -->
			<div class="sidebar-container">
				<div class="sidebar-box">
					<span class="sidebar-status bg-primary">@Model.Status</span>

                    <h4 class="fa-solid fa-dollar-sign">@Model.BudgetMin - @Model.BudgetMax</h4>
					<div class="sidebar-inner-box">
						<div class="sidebar-box-thumb">
							<img src="@Model.Client.ProfileImageUrl" class="img-responsive" alt="" />
						</div>
						<div class="sidebar-box-detail">
							<h4>@Model.Client.FullName</h4>
							<!-- Client Rating Display -->
							<div class="client-rating mb-2">
								@{
									var fullStars = (int)Math.Floor((double)Model.Client.AverageRating);
									var hasHalfStar = (double)Model.Client.AverageRating - fullStars >= 0.5;
									var emptyStars = 5 - fullStars - (hasHalfStar ? 1 : 0);
								}
								@for (int i = 0; i < fullStars; i++)
								{
									<i class="fa fa-star text-warning"></i>
								}
								@if (hasHalfStar)
								{
									<i class="fa fa-star-half-alt text-warning"></i>
								}
								@for (int i = 0; i < emptyStars; i++)
								{
									<i class="fa fa-star text-muted"></i>
								}
								<span class="rating-text ms-2">
									@Model.Client.AverageRating.ToString("F1") 
									(@Model.Client.TotalReviews review@(Model.Client.TotalReviews == 1 ? "" : "s"))
								</span>
							</div>
						</div>
					</div>
					<div class="sidebar-box-extra">
						<ul class="status-detail">
							<li class="br-1"><strong>@Model.Client.Company.Name</strong>Company</li>
						</ul>
					</div>
				</div>
                <a class="btn btn-sidebar bt-1 bg-primary " asp-controller="Proposals" asp-action="Submit" asp-route-jobId="@Model.Id">Apply For This</a>
			</div>

		</div>
		<!-- End Sidebar -->

	</div>
</section>

@section Scripts{
	<partial name="_ValidationScriptsPartial"/>
}